<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Controle Financeiro 2.0</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.25/dist/jspdf.plugin.autotable.min.js"></script>

    <link rel="stylesheet" href="css/style.css">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkbg: '#0f172a',
                        darkcard: '#1e293b',
                        primary: '#f59e0b',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 dark:bg-darkbg text-gray-800 dark:text-gray-100 transition-colors duration-300 pb-24 md:pb-0">

    <header class="fixed top-0 w-full bg-white dark:bg-darkcard shadow-md z-40 p-4 md:hidden flex justify-between items-center h-16">
        <div class="flex items-center gap-2">
            <span class="text-xl font-bold">Finan√ßas <span class="text-yellow-500">üî•</span></span>
        </div>
        <div class="flex gap-2">
            <button id="btn-theme-mobile" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300">
                <i class="fas fa-moon"></i>
            </button>
            <button id="btn-user-menu-mobile" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300">
                <i class="fas fa-cog"></i>
            </button>
        </div>
    </header>

    <div class="hidden md:flex max-w-6xl mx-auto p-6 justify-between items-center">
        <h1 class="text-2xl font-bold">Painel Financeiro</h1>
        <div class="flex gap-3" id="desktop-actions">
            <button id="btn-theme-desktop" class="w-10 h-10 rounded-full bg-white dark:bg-darkcard shadow border dark:border-gray-700 flex items-center justify-center text-gray-600 dark:text-yellow-400 hover:bg-gray-50 transition">
                <i class="fas fa-moon"></i>
            </button>
            <button id="btn-logout-desktop" class="px-4 py-2 bg-red-100 text-red-600 rounded-lg font-bold hover:bg-red-200 transition text-sm flex items-center">
                <i class="fas fa-sign-out-alt mr-2"></i> Sair
            </button>
        </div>
    </div>

    <div class="max-w-6xl mx-auto p-4 pt-20 md:pt-0">
        
        <div id="login-screen" class="fixed inset-0 z-50 bg-white dark:bg-darkbg flex flex-col items-center justify-center p-6">
            <div class="w-full max-w-sm text-center">
                <h1 class="text-3xl font-bold mb-2">Bem-vindo</h1>
                <p class="text-gray-500 mb-8">Controle suas finan√ßas de forma simples.</p>
                <div class="bg-white dark:bg-darkcard p-6 rounded-2xl shadow-lg border dark:border-gray-700">
                    <input id="email" type="email" placeholder="Seu e-mail" class="w-full mb-3 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-600 outline-none focus:border-yellow-500" />
                    <input id="password" type="password" placeholder="Sua senha" class="w-full mb-4 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-600 outline-none focus:border-yellow-500" />
                    <button id="btn-login" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 rounded-lg transition">Entrar</button>
                    <p id="auth-msg" class="text-red-500 text-sm mt-3 h-5"></p>
                </div>
            </div>
        </div>

        <div id="app-content" class="hidden animate-fade-in">
            
            <nav class="hidden md:flex gap-4 mb-6 border-b dark:border-gray-700 pb-2">
                <button class="nav-desktop active" data-tab="dashboard">Dashboard</button>
                <button class="nav-desktop" data-tab="transacoes">Transa√ß√µes</button>
                <button class="nav-desktop" data-tab="futuras">Futuras</button>
                <button class="nav-desktop" data-tab="extrato">Relat√≥rios</button>
            </nav>

            <div class="flex justify-between items-center mb-6">
                <div class="relative w-full md:w-64">
                    <i class="fas fa-calendar absolute left-3 top-3 text-gray-400"></i>
                    <input type="month" id="global-month" class="w-full pl-10 pr-4 py-2 rounded-lg border dark:bg-darkcard dark:border-gray-700 font-bold text-lg outline-none focus:ring-2 focus:ring-yellow-500 transition dark:text-white">
                </div>
            </div>

            <section id="tab-dashboard" class="tab-content">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-white dark:bg-darkcard p-5 rounded-2xl shadow-sm border-l-4 border-green-500 relative overflow-hidden">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-1">Entradas</div>
                        <div id="dash-receitas" class="text-2xl font-bold text-green-500">R$ 0,00</div>
                        <i class="fas fa-arrow-up absolute right-4 bottom-4 text-green-500/10 text-6xl"></i>
                    </div>
                    <div class="bg-white dark:bg-darkcard p-5 rounded-2xl shadow-sm border-l-4 border-red-500 relative overflow-hidden">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-1">Sa√≠das</div>
                        <div id="dash-despesas" class="text-2xl font-bold text-red-500">R$ 0,00</div>
                        <i class="fas fa-arrow-down absolute right-4 bottom-4 text-red-500/10 text-6xl"></i>
                    </div>
                    <div class="bg-white dark:bg-darkcard p-5 rounded-2xl shadow-sm border-l-4 border-blue-500 relative overflow-hidden">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-1">Saldo L√≠quido</div>
                        <div id="dash-saldo" class="text-2xl font-bold text-blue-500">R$ 0,00</div>
                        <i class="fas fa-wallet absolute right-4 bottom-4 text-blue-500/10 text-6xl"></i>
                    </div>
                </div>

                <div class="bg-white dark:bg-darkcard p-4 rounded-2xl shadow-sm mb-6">
                    <h3 class="text-sm font-bold text-gray-500 mb-4">Gastos por Categoria</h3>
                    <div class="h-64 relative w-full flex justify-center">
                        <canvas id="expenseChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="tab-transacoes" class="tab-content hidden">
                <div class="mb-4">
                    <input id="search-trans" placeholder="üîç Buscar lan√ßamento..." class="w-full p-3 rounded-xl bg-white dark:bg-darkcard border-none shadow-sm outline-none dark:text-white" />
                </div>
                <div id="transaction-list" class="space-y-3"></div>
            </section>
            
             <section id="tab-futuras" class="tab-content hidden">
                <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-xl mb-4 flex justify-between items-center">
                    <div>
                        <div class="text-xs text-yellow-600 dark:text-yellow-400 font-bold uppercase">Previs√£o de Sobra</div>
                        <div id="future-balance" class="text-xl font-bold text-gray-700 dark:text-gray-200">R$ ...</div>
                    </div>
                    <i class="fas fa-crystal-ball text-2xl text-yellow-500"></i>
                </div>
                <div id="future-list" class="space-y-3"></div>
            </section>

            <section id="tab-extrato" class="tab-content hidden">
                <div id="report-preview" class="bg-white dark:bg-darkcard rounded-xl p-4 overflow-x-auto"></div>
            </section>
        </div>
    </div>

    <button id="fab-add" class="fixed right-6 bottom-24 md:bottom-10 bg-yellow-500 hover:bg-yellow-400 text-white w-14 h-14 rounded-full shadow-2xl flex items-center justify-center text-2xl z-40 transition-transform active:scale-90">
        <i class="fas fa-plus"></i>
    </button>

    <nav class="fixed bottom-0 left-0 w-full bg-white dark:bg-darkcard border-t dark:border-gray-700 flex justify-around py-3 md:hidden z-50 safe-area-bottom">
        <button class="nav-item active" data-tab="dashboard"><i class="fas fa-chart-pie text-xl mb-1"></i><span class="text-[10px]">Painel</span></button>
        <button class="nav-item" data-tab="transacoes"><i class="fas fa-list text-xl mb-1"></i><span class="text-[10px]">Trans.</span></button>
        <button class="nav-item" data-tab="futuras"><i class="fas fa-calendar-alt text-xl mb-1"></i><span class="text-[10px]">Futuro</span></button>
        <button class="nav-item" data-tab="extrato"><i class="fas fa-file-alt text-xl mb-1"></i><span class="text-[10px]">Extrato</span></button>
    </nav>

    <div id="modal-transaction" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" id="modal-overlay"></div>
        <div class="absolute bottom-0 md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 w-full md:w-[500px] h-[95vh] md:h-auto bg-white dark:bg-darkcard rounded-t-3xl md:rounded-2xl p-6 shadow-2xl animate-slide-up flex flex-col">
            
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold dark:text-white">Transa√ß√£o</h3>
                <button id="close-modal" class="w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center dark:text-white"><i class="fas fa-times"></i></button>
            </div>

            <form id="form-transaction" class="flex-1 overflow-y-auto pb-20 custom-scrollbar">
                <input type="hidden" id="tx-id">
                
                <div class="mb-4">
                    <label class="text-xs text-gray-500 font-bold uppercase ml-1">Valor Total</label>
                    <div class="relative">
                        <span class="absolute left-0 top-3 text-gray-500 font-bold text-xl">R$</span>
                        <input id="input-amount" type="tel" inputmode="numeric" placeholder="0,00" required class="w-full text-4xl font-bold bg-transparent border-b-2 border-gray-200 dark:border-gray-700 focus:border-yellow-500 outline-none pl-10 py-2 text-gray-800 dark:text-white transition-colors" />
                    </div>
                </div>

                <div class="bg-gray-100 dark:bg-gray-800 p-1 rounded-lg flex mb-4">
                    <label class="flex-1 cursor-pointer">
                        <input type="radio" name="type" value="saida" class="peer hidden" checked>
                        <div class="py-2 text-center rounded-md text-sm font-bold text-gray-500 peer-checked:bg-white peer-checked:text-red-500 peer-checked:shadow-sm dark:peer-checked:bg-darkcard transition-all">Despesa</div>
                    </label>
                    <label class="flex-1 cursor-pointer">
                        <input type="radio" name="type" value="entrada" class="peer hidden">
                        <div class="py-2 text-center rounded-md text-sm font-bold text-gray-500 peer-checked:bg-white peer-checked:text-green-500 peer-checked:shadow-sm dark:peer-checked:bg-darkcard transition-all">Receita</div>
                    </label>
                </div>

                <div class="grid grid-cols-2 gap-3 mb-3">
                    <div>
                        <label class="text-xs text-gray-500 mb-1 block">Data</label>
                        <input type="date" id="input-date" required class="w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-600 outline-none dark:text-white">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 mb-1 block">Categoria</label>
                        <select id="input-category" class="w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-600 outline-none bg-white dark:bg-gray-800 dark:text-white">
                            </select>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="text-xs text-gray-500 mb-1 block">Descri√ß√£o</label>
                    <input id="input-desc" placeholder="Ex: Compras" class="w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-600 outline-none dark:text-white">
                </div>

                <div class="grid grid-cols-2 gap-3 mb-4 bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg border dark:border-gray-700">
                    <div>
                        <label class="text-xs text-gray-500 mb-1 block font-bold">Repetir?</label>
                        <select id="input-recurrence" class="w-full p-2 rounded border dark:bg-gray-800 dark:border-gray-600 outline-none text-sm dark:text-white">
                            <option value="single">N√£o (√önica)</option>
                            <option value="installment">Parcelado (x Vezes)</option>
                            <option value="fixed">Fixo (Todo M√™s)</option>
                        </select>
                    </div>
                    <div id="div-installments" class="hidden">
                        <label class="text-xs text-gray-500 mb-1 block font-bold">Qtd. Meses</label>
                        <input type="number" id="input-installments" value="2" min="2" max="60" class="w-full p-2 rounded border dark:bg-gray-800 dark:border-gray-600 outline-none text-sm dark:text-white">
                    </div>
                </div>

                <div class="flex items-center gap-3 mb-6">
                    <div class="flex items-center h-5">
                        <input id="input-paid" type="checkbox" checked class="w-5 h-5 text-yellow-500 rounded focus:ring-yellow-500">
                    </div>
                    <label for="input-paid" class="text-sm font-medium text-gray-700 dark:text-gray-300">J√° foi pago/recebido?</label>
                </div>

                <button type="submit" id="btn-save" class="w-full bg-yellow-500 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl hover:bg-yellow-400 transition transform active:scale-95">
                    Salvar Lan√ßamento
                </button>
            </form>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>